<!DOCTYPE html>
<!-- æŒ‡å®š HTML5 æ–‡æ¡£ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨ç”¨æ ‡å‡†æ¨¡å¼è§£æ -->
<html>
  <head>
    <meta charset="utf-8" />
    <!-- é¡µé¢å­—ç¬¦é›†ä¸º UTF-8ï¼Œé¿å…ä¸­æ–‡ä¹±ç  -->
    <title>Three.js 3D Playground â€” Drag + Vertical Move</title>
    <!-- æµè§ˆå™¨æ ‡ç­¾æ ‡é¢˜ -->
    <style>
      /* é¡µé¢åŸºç¡€æ ·å¼ */
      body {
        margin: 0; /* å»æ‰é»˜è®¤å¤–è¾¹è·ï¼Œè®©ç”»å¸ƒå…¨å±é“ºæ»¡ */
        background: linear-gradient(
          135deg,
          #1e3c72,
          #2a5298
        ); /* æ¸å˜èƒŒæ™¯ï¼Œå¢å¼ºè§†è§‰ */
        overflow: hidden; /* éšè—æ»šåŠ¨æ¡ï¼Œé¿å…æ‹–æ‹½æ—¶å‡ºç°æ»šåŠ¨ */
        font-family: 'Segoe UI', sans-serif; /* å…¨å±€å­—ä½“ */
      }
      canvas {
        display: block;
      } /* è®© WebGL ç”»å¸ƒä½œä¸ºå—çº§å…ƒç´ é“ºæ»¡ */
      /* é¡¶éƒ¨æ ‡é¢˜æ¡æ ·å¼ */
      #title {
        position: fixed;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        /* å›ºå®šåœ¨é¡¶éƒ¨ä¸­é—´ï¼Œtransform ç”¨æ¥åšæ°´å¹³å±…ä¸­ */
        background: rgba(255, 255, 255, 0.15);
        color: #fff;
        padding: 10px 20px;
        border-radius: 12px;
        font-size: 20px;
        font-weight: bold;
        backdrop-filter: blur(6px); /* ç»ç’ƒæ‹Ÿæ€çš„ç£¨ç ‚æ•ˆæœ */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        z-index: 10; /* é˜´å½±ä¸å±‚çº§ */
      }
      /* å·¦ä¸‹è§’ä¿¡æ¯å¡ç‰‡æ ·å¼ */
      #infoBox {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 10;
        background: rgba(255, 255, 255, 0.15);
        color: #fff;
        padding: 12px 16px;
        border-radius: 10px;
        font-size: 14px;
        display: none; /* é»˜è®¤éšè— */
        backdrop-filter: blur(8px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }
      /* å³ä¸Šè§’æç¤ºæ¡æ ·å¼ */
      #hint {
        position: fixed;
        right: 16px;
        top: 16px;
        z-index: 10;
        color: #e9f2ff;
        opacity: 0.95;
        background: rgba(255, 255, 255, 0.12);
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 12px;
        backdrop-filter: blur(6px);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
    </style>
  </head>
  <body>
    <!-- é¡¶éƒ¨æ ‡é¢˜ï¼šè¯´æ˜åŠŸèƒ½ -->
    <div id="title">âœ¨ Three.js 3D Playgroundï¼ˆæ‹–æ‹½ + ç«–ç›´ç§»åŠ¨ï¼‰</div>
    <!-- å³ä¸Šè§’æ“ä½œæç¤ºï¼šå«æ¨¡å¼åˆ‡æ¢æç¤ºä¸é«˜åº¦é”å®šçŠ¶æ€ -->
    <div id="hint">
      ğŸ–± æ‹–åŠ¨ç‰©ä½“ Â· æ»šè½®ç¼©æ”¾ Â· åŒå‡»ç‰©ä½“å¯ç”¨æ“çºµæ†ï¼ˆW/E/R åˆ‡æ¢ ç§»åŠ¨/æ—‹è½¬/ç¼©æ”¾ï¼‰<br />ğŸ”’
      é«˜åº¦é”å®šï¼š<span id="lockState">å¼€</span>ï¼ˆæŒ‰ L åˆ‡æ¢ï¼‰
    </div>
    <!-- å·¦ä¸‹è§’ä¿¡æ¯æ¡†ï¼šæ˜¾ç¤ºé€‰ä¸­ç‰©ä½“çš„åç§°ä¸åæ ‡ -->
    <div id="infoBox">
      <b id="objName">Object</b><br />
      <span id="objPos"></span>
    </div>

    <!-- three.js r124 æ ¸å¿ƒåº“ï¼ˆéæ¨¡å—è€å†™æ³•ï¼Œä¸ä½ ç°æœ‰ç¯å¢ƒå…¼å®¹ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.124.0/build/three.min.js"></script>
    <!-- è½¨é“æ§åˆ¶ï¼šé¼ æ ‡æ‹–æ‹½ç›¸æœº -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.124.0/examples/js/controls/OrbitControls.js"></script>
    <!-- æ‹–æ‹½æ§åˆ¶ï¼šé¼ æ ‡ç›´æ¥æ‹–åŠ¨ç‰©ä½“ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.124.0/examples/js/controls/DragControls.js"></script>
    <!-- å˜æ¢æ§åˆ¶ï¼šå¸¦ XYZ è½´æ“çºµæ†çš„æ§åˆ¶ï¼ˆç§»åŠ¨/æ—‹è½¬/ç¼©æ”¾ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.124.0/examples/js/controls/TransformControls.js"></script>

    <script>
      // ===== åœºæ™¯ / ç›¸æœº / æ¸²æŸ“å™¨åŸºç¡€æ­å»º =====
      const scene = new THREE.Scene(); // åˆ›å»ºä¸€ä¸ªåœºæ™¯ï¼Œå®¹çº³æ‰€æœ‰ 3D å¯¹è±¡

      const camera = new THREE.PerspectiveCamera( // é€è§†ç›¸æœºï¼ˆäººçœ¼è§†è§’ï¼‰
        75, // è§†é‡å¤¹è§’ï¼ˆFOVï¼‰
        window.innerWidth / window.innerHeight, // å®½é«˜æ¯”
        0.1, // è¿‘è£å‰ªé¢
        1000, // è¿œè£å‰ªé¢
      );
      camera.position.set(4, 4, 6); // æŠŠç›¸æœºæ”¾åˆ°(4,4,6) è§’åº¦æ›´èƒ½çœ‹åˆ°åœºæ™¯

      const renderer = new THREE.WebGLRenderer({ antialias: true }); // åˆ›å»º WebGL æ¸²æŸ“å™¨ï¼Œå¼€æŠ—é”¯é½¿
      renderer.setSize(window.innerWidth, window.innerHeight); // è®¾ç½®æ¸²æŸ“å°ºå¯¸ä¸ºçª—å£å¤§å°
      document.body.appendChild(renderer.domElement); // æŠŠç”»å¸ƒå…ƒç´ æ’å…¥åˆ°é¡µé¢

      // ===== è½¨é“æ§åˆ¶ï¼ˆOrbitControlsï¼‰ï¼šæ‹–æ‹½æ—‹è½¬ã€æ»šè½®ç¼©æ”¾ç›¸æœº =====
      const orbit = new THREE.OrbitControls(camera, renderer.domElement); // ç»‘å®šç›¸æœºä¸ç”»å¸ƒ
      orbit.enableDamping = true; // å¼€å¯é˜»å°¼ï¼ˆæƒ¯æ€§æ•ˆæœï¼‰ï¼Œäº¤äº’æ›´é¡ºæ»‘

      // ===== ç¯å…‰è®¾ç½® =====
      scene.add(new THREE.AmbientLight(0xffffff, 0.4)); // ç¯å¢ƒå…‰ï¼ŒæŸ”å’Œç…§äº®æ•´ä¸ªåœºæ™¯
      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8); // å¹³è¡Œå…‰ï¼Œæ¨¡æ‹Ÿå¤ªé˜³å…‰
      dirLight.position.set(5, 5, 5); // å…‰æºæ–¹å‘ä¸ä½ç½®
      scene.add(dirLight); // æ·»åŠ åˆ°åœºæ™¯

      // ===== åœ°é¢ä¸ç½‘æ ¼ =====
      const ground = new THREE.Mesh( // åœ°é¢ï¼šä¸€ä¸ªå¤§å¹³é¢
        new THREE.PlaneGeometry(20, 20), // 20x20 çš„å¹³é¢
        new THREE.MeshStandardMaterial({ color: 0x222222, roughness: 0.8 }), // ç²—ç³™æè´¨
      );
      ground.rotation.x = -Math.PI / 2; // æ—‹è½¬ -90Â°ï¼Œè®©å¹³é¢ä»ç«–ç›´å˜æˆæ°´å¹³åœ°é¢
      scene.add(ground); // åŠ å…¥åœºæ™¯

      const grid = new THREE.GridHelper(20, 20, 0x88a, 0x556); // åœ°é¢ç½‘æ ¼è¾…åŠ©ï¼ˆ20æ ¼ï¼‰
      grid.position.y = 0.001; // ç¨å¾®æŠ¬é«˜ä¸€ç‚¹ï¼Œé¿å…ä¸åœ°é¢ Z å†²çªäº§ç”Ÿé—ªçƒ
      scene.add(grid); // åŠ å…¥åœºæ™¯

      // ===== ä¸‰ä¸ªå¯äº¤äº’çš„å‡ ä½•ä½“ï¼šCube / Sphere / Cylinder =====
      const cube = new THREE.Mesh( // ç«‹æ–¹ä½“
        new THREE.BoxGeometry(1, 1, 1), // å‡ ä½•ä½“ï¼š1x1x1
        new THREE.MeshStandardMaterial({ color: 0x66ccff }), // æ ‡å‡†æè´¨ï¼ˆå—å…‰å½±å“ï¼‰
      );
      cube.position.set(-2, 0.5, 0); // æ”¾åœ¨åœ°é¢ä¸Šæ–¹ 0.5ï¼ˆåˆšå¥½åŠä¸ªé«˜åº¦ï¼‰ï¼ŒX=-2
      cube.name = 'Cube'; // å‘½åç”¨äº UI å±•ç¤º
      const sphere = new THREE.Mesh( // çƒä½“
        new THREE.SphereGeometry(0.7, 32, 32), // åŠå¾„ 0.7ï¼Œç»†åˆ† 32
        new THREE.MeshStandardMaterial({ color: 0xff7777 }),
      );
      sphere.position.set(0, 0.7, 0); // æ”¾åœ¨åœ°é¢ä¸Šæ–¹ 0.7ï¼ˆçƒåŠå¾„ï¼‰
      sphere.name = 'Sphere';
      const cylinder = new THREE.Mesh( // åœ†æŸ±ä½“
        new THREE.CylinderGeometry(0.6, 0.6, 1.5, 32), // é¡¶/åº•åŠå¾„0.6ï¼Œé«˜1.5ï¼Œåˆ†æ®µ32
        new THREE.MeshStandardMaterial({ color: 0x88ff88 }),
      );
      cylinder.position.set(2, 0.75, 0); // æŠ¬åˆ°åœ°é¢ä¸Šæ–¹ 0.75ï¼ˆåŠé«˜ 0.75ï¼‰
      cylinder.name = 'Cylinder';

      scene.add(cube, sphere, cylinder); // ä¸€æ¬¡æ€§åŠ å…¥ä¸‰ä¸ªç‰©ä½“

      // ===== ç‚¹å‡»æ‹¾å–ï¼šRaycaster + é¼ æ ‡è§„èŒƒåŒ–åæ ‡ =====
      const raycaster = new THREE.Raycaster(); // å…‰çº¿æŠ•å°„å™¨ï¼Œç”¨æ¥åšé¼ æ ‡æ‹¾å–
      const mouse = new THREE.Vector2(); // å­˜æ”¾é¼ æ ‡çš„è§„èŒƒåŒ–è®¾å¤‡åæ ‡ï¼ˆ-1~1ï¼‰

      function updateMouse(e) {
        // æŠŠå±å¹•åƒç´ åæ ‡è½¬æ¢åˆ° -1~1
        mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
      }

      function showInfo(obj) {
        // æ›´æ–°å·¦ä¸‹è§’ä¿¡æ¯å¡ç‰‡
        const info = document.getElementById('infoBox');
        document.getElementById('objName').textContent = obj.name || 'Object';
        const p = obj.position;
        document.getElementById('objPos').textContent = `ä½ç½®: (${p.x.toFixed(
          2,
        )}, ${p.y.toFixed(2)}, ${p.z.toFixed(2)})`;
        info.style.display = 'block'; // æ˜¾ç¤ºå¡ç‰‡
      }

      // ç”»å¸ƒç‚¹å‡»äº‹ä»¶ï¼šç‚¹å‡»å¯¹è±¡æ—¶æ˜¾ç¤ºä¿¡æ¯å¹¶é—ªçƒ
      renderer.domElement.addEventListener('click', (e) => {
        if (isTransformDragging) return; // æ‹–æ“çºµæ†æœŸé—´ï¼Œä¸è§¦å‘ç‚¹å‡»æ‹¾å–
        updateMouse(e); // æ›´æ–°é¼ æ ‡ NDC åæ ‡
        raycaster.setFromCamera(mouse, camera); // ä»ç›¸æœºå‡ºå‘æŠ•å°„ä¸€æ¡â€œæ‹¾å–å…‰çº¿â€
        const hits = raycaster.intersectObjects(draggable); // ä¸å¯æ‹–æ‹½ç‰©ä½“æ±‚äº¤
        if (hits.length > 0) {
          // è‹¥æœ‰å‘½ä¸­
          const obj = hits[0].object; // å–æœ€è¿‘çš„é‚£ä¸ª
          showInfo(obj); // æ›´æ–°ä¿¡æ¯å¡
          const old = obj.material.color.clone(); // é¢œè‰²é—ªçƒåé¦ˆï¼šå…ˆå¤‡ä»½åŸè‰²
          obj.material.color.set(0xffff00); // ç¬æ—¶å˜é»„
          setTimeout(() => obj.material.color.copy(old), 300); // 300ms åè¿˜åŸ
          lastSelected = obj; // è®°å½•é€‰ä¸­å¯¹è±¡ï¼ˆä¾› TransformControls ä½¿ç”¨ï¼‰
        }
      });

      // ===== æ‹–æ‹½æ§åˆ¶ï¼ˆDragControlsï¼‰ï¼šç”¨é¼ æ ‡æ‹–åŠ¨ç‰©ä½“åœ¨å¹³é¢ä¸Šç§»åŠ¨ =====
      const draggable = [cube, sphere, cylinder]; // æŒ‡å®šå“ªäº›ç‰©ä½“å¯æ‹–æ‹½
      const drag = new THREE.DragControls(
        draggable,
        camera,
        renderer.domElement,
      ); // åˆ›å»ºæ‹–æ‹½æ§åˆ¶å™¨

      // â€œé«˜åº¦é”å®šâ€ å¼€å…³ï¼štrue = è´´åœ°ç§»åŠ¨ï¼Œåªæ”¹ X/Zï¼›false = å±å¹•å¹³é¢æ‹–åŠ¨ï¼ˆä¼šå¸¦ä¸€ç‚¹ä¸Šä¸‹ï¼‰
      let lockToGround = true; // åˆå§‹å¼€å¯
      const lockStateEl = document.getElementById('lockState'); // å³ä¸Šè§’çŠ¶æ€æ–‡æœ¬ <span>
      function setLockUI() {
        lockStateEl.textContent = lockToGround ? 'å¼€' : 'å…³';
      } // åˆ·æ–° UI
      setLockUI(); // åˆå§‹åŒ– UI æ˜¾ç¤º

      // æ¯ä¸ªç‰©ä½“â€œè´´åœ°é«˜åº¦â€çš„åŸºå‡†ï¼ˆåŠé«˜/åŠå¾„ï¼‰ï¼Œç”¨äºæ‹–æ‹½æ—¶å¼ºåˆ¶ Y ä¿æŒæ’å®š
      const baseY = new Map([
        [cube, 0.5],
        [sphere, 0.7],
        [cylinder, 0.75],
      ]);
      let isDragging = false; // è®°å½•æ˜¯å¦æ­£åœ¨æ‹–æ‹½ä¸­ï¼ˆç”¨äºæš‚åœæ¼”ç¤ºåŠ¨ç”»ï¼‰

      // é¼ æ ‡æ‚¬åœåˆ°å¯æ‹–æ‹½ç‰©ä½“ä¸Šï¼Œæ”¹å˜å…‰æ ‡å½¢æ€åšæç¤º
      drag.addEventListener('hoveron', () => {
        renderer.domElement.style.cursor = 'grab';
      });
      drag.addEventListener('hoveroff', () => {
        renderer.domElement.style.cursor = 'default';
      });

      // å¼€å§‹æ‹–æ‹½ï¼šç¦ç”¨ç›¸æœºè½¨é“æ§åˆ¶ï¼Œå¿…è¦æ—¶æŠŠç‰©ä½“â€œå¸å›â€è´´åœ°é«˜åº¦
      drag.addEventListener('dragstart', (e) => {
        isDragging = true;
        orbit.enabled = false; // æ‹–æ‹½æ—¶ç¦ç”¨ OrbitControlsï¼Œé¿å…å†²çª
        renderer.domElement.style.cursor = 'grabbing';
        if (lockToGround)
          e.object.position.y = baseY.get(e.object) || e.object.position.y;
      });

      // æ‹–æ‹½è¿‡ç¨‹ï¼šå¦‚æœé«˜åº¦é”å®šï¼Œå°±æŒç»­æŠŠ y å›ºå®šåœ¨åŸºå‡†é«˜åº¦ï¼ˆåªå…è®¸ X/Z æ”¹å˜ï¼‰
      drag.addEventListener('drag', (e) => {
        if (lockToGround)
          e.object.position.y = baseY.get(e.object) || e.object.position.y;
      });

      // æ‹–æ‹½ç»“æŸï¼šæ¢å¤ç›¸æœºæ§åˆ¶ï¼Œæ˜¾ç¤ºä¸€æ¬¡ä¿¡æ¯å¡ï¼Œå¹¶è®°å½•â€œæœ€åé€‰ä¸­â€
      drag.addEventListener('dragend', (e) => {
        isDragging = false;
        orbit.enabled = true;
        renderer.domElement.style.cursor = 'default';
        showInfo(e.object);
        lastSelected = e.object;
      });

      // é”®ç›˜ Lï¼šåˆ‡æ¢â€œé«˜åº¦é”å®šâ€å¼€å…³ï¼Œå¹¶æ›´æ–°å³ä¸Šè§’æ–‡æœ¬
      window.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'l') {
          lockToGround = !lockToGround; // å–å
          setLockUI(); // åˆ·æ–° UI
        }
      });

      // ===== TransformControlsï¼šåŒå‡»ç‰©ä½“å‡ºç° XYZ è½´æ“çºµæ†ï¼ˆæ›´ç²¾ç¡®çš„ç§»åŠ¨/æ—‹è½¬/ç¼©æ”¾ï¼‰=====
      const transform = new THREE.TransformControls(
        camera,
        renderer.domElement,
      ); // åˆ›å»ºæ“çºµæ†
      transform.setMode('translate'); // åˆå§‹æ¨¡å¼ä¸ºâ€œå¹³ç§»â€ï¼ˆW/E/R å¯åˆ‡æ¢ï¼‰
      transform.addEventListener('dragging-changed', (ev) => {
        // åªè¦æ‹–æ“çºµæ†ï¼Œå°±ç¦ç”¨ç›¸æœºä¸æ‹–æ‹½ï¼Œé¿å…å†²çªï¼›æ¾æ‰‹å†æ¢å¤
        isTransformDragging = ev.value;
        orbit.enabled = !ev.value;
        drag.enabled = !ev.value;
      });
      scene.add(transform); // æŠŠæ§ä»¶åŠ è¿›åœºæ™¯ï¼ˆå®ƒè‡ªå·±ä¹Ÿä¼šæ¸²æŸ“ UIï¼‰

      let isTransformDragging = false; // æ ‡è®°æ˜¯å¦æ­£é€šè¿‡æ“çºµæ†æ‹–åŠ¨
      let lastSelected = null; // è®°å½•æœ€è¿‘ä¸€æ¬¡ç‚¹å‡»/æ‹–æ‹½çš„å¯¹è±¡

      // åŒå‡»ï¼šè‹¥åŒå‡»åœ¨ç‰©ä½“ä¸Šï¼Œåˆ™ç»™è¯¥ç‰©ä½“æŒ‚ä¸Šæ“çºµæ†ï¼›åŒå‡»ç©ºç™½å¤„åˆ™ç§»é™¤
      renderer.domElement.addEventListener('dblclick', (e) => {
        updateMouse(e); // æ›´æ–°é¼ æ ‡ NDC
        raycaster.setFromCamera(mouse, camera); // æŠ•å°„æ‹¾å–å…‰çº¿
        const hits = raycaster.intersectObjects(draggable); // çœ‹çœ‹æœ‰æ²¡æœ‰ç‚¹åˆ°å¯æ‹–æ‹½ç‰©ä½“
        if (hits.length) {
          lastSelected = hits[0].object; // å–æœ€è¿‘çš„å‘½ä¸­
          transform.attach(lastSelected); // æŠŠæ“çºµæ†â€œé™„ç€â€åˆ°è¯¥ç‰©ä½“
          showInfo(lastSelected); // æ›´æ–°ä¿¡æ¯å¡
        } else {
          transform.detach(); // åŒå‡»ç©ºç™½ï¼šå–æ¶ˆæ“çºµæ†
        }
      });

      // ===== åŠ¨ç”»ä¸»å¾ªç¯ =====
      const clock = new THREE.Clock(); // è®¡æ—¶å™¨ï¼Œç”¨äºåšå¹³æ»‘åŠ¨ç”»ï¼ˆå¦‚çƒä½“ä¸Šä¸‹æµ®åŠ¨ï¼‰
      function animate() {
        requestAnimationFrame(animate); // æµè§ˆå™¨ä¸‹ä¸€å¸§æ—¶å†è°ƒç”¨ animateï¼ˆå¾ªç¯ï¼‰

        const t = clock.getElapsedTime(); // è·å–ä»å¯åŠ¨åˆ°ç°åœ¨çš„æ—¶é—´ï¼ˆç§’ï¼‰

        // æ¼”ç¤ºåŠ¨ç”»ï¼šä¸åœ¨æ‹–æ‹½/æ“çºµæ—¶ï¼Œç‰©ä½“åšäº›è½»å¾®åŠ¨æ€ï¼Œåœºæ™¯æ›´ç”ŸåŠ¨
        if (!isDragging && !isTransformDragging) {
          cube.rotation.x += 0.01; // ç«‹æ–¹ä½“è‡ªè½¬
          cube.rotation.y += 0.01;
          cylinder.rotation.x += 0.005; // åœ†æŸ±ä½“æ…¢è½¬
          // çƒä½“ä¸Šä¸‹æµ®åŠ¨ï¼šåŸºäºæ­£å¼¦å‡½æ•°ï¼Œå›´ç»•å®ƒçš„â€œè´´åœ°é«˜åº¦â€ä¸Šä¸‹ 0.2
          sphere.position.y =
            (baseY.get(sphere) || 0.7) + Math.sin(t * 2) * 0.2;
        }

        orbit.update(); // è‹¥å¯ç”¨é˜»å°¼ï¼Œéœ€è¦åœ¨æ¸²æŸ“å‰è°ƒç”¨ update()
        renderer.render(scene, camera); // æŠŠè¿™ä¸€å¸§ç”»åˆ°ç”»å¸ƒä¸Š
      }
      animate(); // å¯åŠ¨åŠ¨ç”»å¾ªç¯

      // ===== è‡ªé€‚åº”çª—å£å¤§å°å˜åŒ– =====
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight; // æ›´æ–°ç›¸æœºå®½é«˜æ¯”
        camera.updateProjectionMatrix(); // é€šçŸ¥ç›¸æœºé‡ç®—æŠ•å½±çŸ©é˜µ
        renderer.setSize(window.innerWidth, window.innerHeight); // è°ƒæ•´æ¸²æŸ“å°ºå¯¸
      });

      // ===== å¿«æ·é”®ï¼šW/E/R åˆ‡æ¢ TransformControls æ¨¡å¼ =====
      window.addEventListener('keydown', (e) => {
        const k = e.key.toLowerCase(); // è½¬å°å†™ç®€åŒ–æ¯”è¾ƒé€»è¾‘
        if (k === 'w') transform.setMode('translate'); // W åˆ‡æ¢â€œå¹³ç§»â€æ¨¡å¼
        if (k === 'e') transform.setMode('rotate'); // E åˆ‡æ¢â€œæ—‹è½¬â€æ¨¡å¼
        if (k === 'r') transform.setMode('scale'); // R åˆ‡æ¢â€œç¼©æ”¾â€æ¨¡å¼
      });
    </script>
  </body>
</html>
